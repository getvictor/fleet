---
name: Release QA
about: Checklist of required tests prior to release
title: 'Release QA:'
labels: '#g-mdm,#g-endpoint-ops,:release'
assignees: xpkoala,sabrinabuckets
---

# Release QA:

## Goal: easy-to-follow test steps for checking a release manually

## Important reference data

1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)
2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions)
3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`
4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`

## Smoke Tests

Smoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.

### Fleet core:

**Fleet version** (Head to the "My account" page in the Fleet UI or run `fleetctl version`):

**Web browser** _(e.g. Chrome 88.0.4324)_:

#### Prerequisites

1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://github.com/fleetdm/fleet/blob/main/handbook/product.md#manual-qa)
2. Unless you are explicitly testing older browser versions, browser is up to date.
3. Certificate & flagfile are in place to create new host.
4. In your browser, clear local storage using devtools.

| Test name                                       | Step instructions                                                                                                                                                                                                                                                                                                                                                                                     | Expected result                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | pass/fail |
| ----------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------- |
| $Name                                           | {what a tester should do}                                                                                                                                                                                                                                                                                                                                                                             | {what a tester should see when they do that}                                                                                                                                                                                                                                                                                                                                                                                                                                               | pass/fail |
| Update flow                                     | <ol><li>remove all fleet processes/agents/etc using <code>fleetctl preview reset</code> for a clean slate</li><li>run <code>fleetctl preview</code> with no tag for latest stable</li><li>create a host/query to later confirm upgrade with</li><li>STOP fleet-preview-server instances in containers/apps on Docker</li><li>run <code>fleetctl preview</code> with appropriate testing tag</li></ol> | All previously created hosts/queries are verified to still exist                                                                                                                                                                                                                                                                                                                                                                                                                           | pass/fail |
| Login flow                                      | <ol><li>navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.</li><li>navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.</li></ol>                                                                                                             | <ol><li>text fields prompt when blank</li><li>correct error message is "authentication failed"</li><li>forget password link prompts for email</li><li>valid credentials result in a successful login.</li><li>valid sso credentials result in a successful login</li></ol>                                                                                                                                                                                                                 | pass/fail |
| Query flow                                      | Create, edit, run, and delete queries.                                                                                                                                                                                                                                                                                                                                                                | <ol><li>permissions regarding creating/editing/deleting queries are up to date with documentation</li><li>syntax errors result in error messaging</li><li>queries can be run manually</li></ol>                                                                                                                                                                                                                                                                                            | pass/fail |
| Host Flow                                       | Verify a new host can be added and removed following modal instructions using your own device.                                                                                                                                                                                                                                                                                                        | <ol><li>Host is added via command line</li><li>Host serial number and date added are accurate</li><li>Host is not visible after it is deleted</li><li>Warning and informational modals show when expected and make sense</li></ol>                                                                                                                                                                                                                                                         | pass/fail |
| Packs flow                                      | Verify management, operation, and logging of \["2017 packs"]\(https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).                                                                                                                                                                                                                                                  | <ol><li>Packs successfully run on host machines after migrations</li><li>New Packs can be created</li><li>Packs can be edited and deleted</li><li>Packs results information is logged</li></ol>                                                                                                                                                                                                                                                                                            | pass/fail |
| Log destination flow                            | Verify log destination for software, query, policy, and packs.                                                                                                                                                                                                                                                                                                                                        | <ol><li>Software, query, policy, and packs logs are successfully sent to external log destinations</li><li>Software, query, policy, and packs logs are successfully sent to Filesystem log destinations</li></ol>                                                                                                                                                                                                                                                                          | pass/fail |
| My device page                                  | Verify the end user's my device page loads successfully.                                                                                                                                                                                                                                                                                                                                              | <ol><li>Clicking the Fleet desktop item, then "My device" successfully loads the my device page.</li><li>The "My device" page is populated correctly and as expected.</li><li>Styling and padding appears correct.</li></ol>                                                                                                                                                                                                                                                               | pass/fail |
| MDM enrollment flow                             | Verify MDM enrollments, run MDM commands                                                                                                                                                                                                                                                                                                                                                              | <ol><li>Erase an ADE-eligible macOS host and verify able to complete auomated enrollment flow.</li><li>With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.</li><li>Verify able to run MDM commands on both macOS and Windows hosts from the CLI.</li></ol>                                                                                                                                                                                         | pass/fail |
| Scripts                                         | Verify script library and execution                                                                                                                                                                                                                                                                                                                                                                   | <ol><li>Verify able to run a script on all host types from CLI.</li><li>Verify scripts library upload/download/delete.</li><li>From Host details (Windows and macOS) run a script that should PASS, verify.</li><li>From Host details (Windows and macOS) run a script that should FAIL, verify.</li><li>Verify UI loading state and statuses for scripts.</li><li>Disable scripts globally and verify unable to run.</li><li>Verify scripts display correctly in Activity feed.</li></ol> | pass/fail |
| OS settings                                     | Verify OS settings functionality                                                                                                                                                                                                                                                                                                                                                                      | <ol><li>Verify able to configure Disk encryption.</li><li>Verify host enrolled with Disk encryption enforced successfully encrypts.</li><li>Verify Profiles upload/download/delete (macOS &#x26; Windows).</li><li>Verify profiles are delivered to host and applied.</li></ol>                                                                                                                                                                                                            | pass/fail |
| Setup experience                                | Verify macOS Setup experience                                                                                                                                                                                                                                                                                                                                                                         | <ol><li>Configure End user authentication.</li><li>Upload a Boostrap package.</li><li>Enroll an ADE-eligible macOS host and verify successful authentication.</li><li>Verify Boostrap package is delivered.</li></ol>                                                                                                                                                                                                                                                                      | pass/fail |
| OS updates                                      | Verify OS updates flow                                                                                                                                                                                                                                                                                                                                                                                | <ol><li>Configure OS updates (macOS &#x26; Windows).</li><li>Verify on-device that Nudge prompt appears (macOS).</li></ol>                                                                                                                                                                                                                                                                                                                                                                 | pass/fail |
| Migration Test                                  | Verify Fleet can migrate to the next version with no issues.                                                                                                                                                                                                                                                                                                                                          | <p>Using the migration scripts located in fleet/test/upgrade/</p><ol><li>Run the upgrade_test.go script using the most recent stable version of Fleet and <code>main</code>.</li><li>Upgrade test returns an 'OK' response.</li></ol>                                                                                                                                                                                                                                                      | pass/fail |
| Migration Test with Percona XtraDB MySQL Server | Verify Fleet can migrate to the next version without issues when using a specific version of Percona XtraDB Server.                                                                                                                                                                                                                                                                                   | Run the instructions in [tools/percona/test/README.md](../../tools/percona/test/)                                                                                                                                                                                                                                                                                                                                                                                                          | pass/fail |
| Release blockers                                | Verify there are no outstanding release blocking tickets.                                                                                                                                                                                                                                                                                                                                             | <ol><li>Check <a href="https://github.com/fleetdm/fleet/labels/~release%20blocker">this</a> filter to view all open <code>~release blocker</code> tickets.</li><li>If any are found raise an alarm in the <code>#help-engineering</code> and <code>#g-mdm</code> (or <code>#g-endpoint-ops</code>) channels.</li></ol>                                                                                                                                                                     | pass/fail |

#### Notes

Issues found new to this version:

Issues found that reproduce in last stable version:

What has not been tested:

Include any notes on whether issues should block release or not as needed:

### `fleetd` agent:

Includes updates to:

* Orbit: True / False
* Desktop: True / False
* Chrome extension: True / False

List versions changes for any component updates below:

* Orbit `v1.xx.x` > `v1.xx.x`
* Desktop `v1.xx.x` > `v1.xx.x`
* Chrome extension `v1.xx.x` > `v1.xx.x`

#### Prerequisites

1. Build a new `fleetd` from the release candidate branch as neded for Orbit, Desktop, and Chrome Extension.

| Test name                    | Step instructions                                                                                                                                                                                                                                                                               | Expected result                                                                                                                                                                                             | pass/fail |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- |
| $Name                        | {what a tester should do}                                                                                                                                                                                                                                                                       | {what a tester should see when they do that}                                                                                                                                                                | pass/fail |
| \`fleetd\` tests             | <p>1. Create binaries for Mac, Windows, and Ubuntu running against the `edge` channels and install (--orbit-channel edge, --desktop-channel edge).<br>2. Work with engineer leading the release to push changes to the `edge` channel.</p>                                                      | <p>1. Confirm the hosts running on the edge channel receive the update and are working correctly.<br>2. Confirm any new features and/or bug fixes associated with this release are working as intended.</p> | pass/fail |
| \`fleetd\` auto-update tests | <p>1. Conduct the [`fleetd` auto-update n+1 test]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/Fleetd-auto-update-test-guide.md))<br>2. QA certifies new release by commenting in issue.<br>3. Engineer waits at least 1 business day, then promotes update to `stable`.</p> | <p>1. Agent successfully auto-updates.<br>2. Issue is certified by QA.<br>3. Agent is promoted to `stable`.<br>4. Confirms agents running on `stable` receive the new update.</p>                           | pass/fail |

## Notes

Issues found new to this version:

Issues found that reproduce in last stable version:

What has not been tested:

Include any notes on whether issues should block release or not as needed:
